!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.ChimeePluginControlbar=t(require("react"),require("react-dom")):e.ChimeePluginControlbar=t(e.React,e.ReactDOM)}(window,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(t,n){t.exports=e},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var c=a.apply(null,r);c&&e.push(c)}else if("object"===o)for(var i in r)n.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},function(e,n){e.exports=t},function(e,t,n){var r=n(4);"string"==typeof r&&(r=[[e.i,r,""]]);var a={insert:"head",singleton:!1};n(6)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(5)(!1)).push([e.i,"",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=(c=r,i=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(l," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot).concat(e," */")}));return[n].concat(o).concat([a]).join("\n")}var c,i,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},a=0;a<this.length;a++){var o=this[a][0];null!=o&&(r[o]=!0)}for(var c=0;c<e.length;c++){var i=e[c];null!=i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="(".concat(i[2],") and (").concat(n,")")),t.push(i))}},t}},function(e,t,n){"use strict";var r,a={},o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},c=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function i(e,t){for(var n=[],r={},a=0;a<e.length;a++){var o=e[a],c=t.base?o[0]+t.base:o[0],i={css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(i):n.push(r[c]={id:c,parts:[i]})}return n}function l(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=a[r.id],c=0;if(o){for(o.refs++;c<o.parts.length;c++)o.parts[c](r.parts[c]);for(;c<r.parts.length;c++)o.parts.push(h(r.parts[c],t))}else{for(var i=[];c<r.parts.length;c++)i.push(h(r.parts[c],t));a[r.id]={id:r.id,refs:1,parts:i}}}}function u(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=n.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var a=c(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var s,m=(s=[],function(e,t){return s[e]=t,s.filter(Boolean).join("\n")});function f(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(t,a);else{var o=document.createTextNode(a),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(o,c[t]):e.appendChild(o)}}function v(e,t,n){var r=n.css,a=n.media,o=n.sourceMap;if(a&&e.setAttribute("media",a),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var d=null,p=0;function h(e,t){var n,r,a;if(t.singleton){var o=p++;n=d||(d=u(t)),r=f.bind(null,n,o,!1),a=f.bind(null,n,o,!0)}else n=u(t),r=v.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=i(e,t);return l(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var c=n[o],u=a[c.id];u&&(u.refs--,r.push(u))}e&&l(i(e,t),t);for(var s=0;s<r.length;s++){var m=r[s];if(0===m.refs){for(var f=0;f<m.parts.length;f++)m.parts[f]();delete a[m.id]}}}}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(2),c=n.n(o),i=n(1),l=n.n(i),u=function(e){var t=~~(e/60),n=Math.floor(e%60);return isNaN(t)||isNaN(n)?"":(t>=10?t:"0"+t)+":"+(n>=10?n:"0"+n)},s=a.a.createContext({});var m=function(){var e=Object(r.useContext)(s),t=Object(r.useRef)(null),n=function(e){var t=Object(r.useState)(0),n=t[0],a=t[1],o=Object(r.useCallback)((function(){try{var t=e.buffered.end(0);a(t)}catch(e){console.log(e)}}),[]);return Object(r.useEffect)((function(){return e.$on("progress",o),function(){return e.$off("progress",o)}}),[]),n/e.duration||0}(e),o=function(e){var t=Object(r.useContext)(s),n=Object(r.useState)(0),a=n[0],o=n[1],c=Object(r.useState)(!1),i=c[0],l=c[1],u=Object(r.useState)(0),m=u[0],f=u[1],v=Object(r.useCallback)((function(t){var n=e.current.getBoundingClientRect(),r=n.width,a=n.left;o((t.pageX-a)/r)}),[e]),d=Object(r.useCallback)((function(n){var r=e.current.getBoundingClientRect(),a=r.width,c=r.left;t.currentTime=(n.pageX-c)/a*t.duration,o(0),l(!1),window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",d),window.removeEventListener("contextmenu",d)}),[e]),p=Object(r.useCallback)((function(){return f(t.currentTime)}),[]);return Object(r.useEffect)((function(){return t.$on("timeupdate",p)}),[]),{active:i,currentTime:i?a*t.duration:m,onMouseDown:function(n){isNaN(t.duration)?console.error("isNaN(duration) === true"):e.current&&(v(n),l(!0),window.addEventListener("mousemove",v),window.addEventListener("mouseup",d),window.addEventListener("contextmenu",d))}}}(t),c=o.active,i=o.currentTime,m=o.onMouseDown,f=100*(i?i/e.duration:0)+"%";return a.a.createElement("div",{className:l()("chimee-controlbar__progress",{active:c}),onMouseDown:m,ref:t},a.a.createElement("div",{className:"chimee-controlbar__progress__buff",style:{width:100*n+"%"}}),a.a.createElement("div",{className:"chimee-controlbar__progress__play",style:{width:f}}),a.a.createElement("div",{className:"chimee-controlbar__progress__point",style:{left:f}},a.a.createElement("div",{className:"chimee-controlbar__progress__point__text",onMouseDown:function(e){return e.stopPropagation()}},u(i)),a.a.createElement("div",{className:"chimee-controlbar__progress__point__circle"})))},f=function(){var e=Object(r.useContext)(s);return a.a.createElement("div",{className:"chimee-controlbar__play",onClick:function(){e.$emit("play")}},a.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},a.a.createElement("path",{d:"M15.1797235,10.5406093 L3.53083201,17.8370951 C3.06278334,18.1302655 2.44569335,17.9884987 2.15252293,17.52045 C2.05285722,17.361333 2,17.1773718 2,16.989618 L2,1.01859462 C2,0.466309874 2.44771525,0.018594624 3,0.018594624 C3.18821633,0.018594624 3.3726117,0.0717124216 3.53198464,0.171840618 L15.1817983,7.49099332 C16.023567,8.01984592 16.2772357,9.13095409 15.7483831,9.97272288 C15.6040504,10.2024557 15.4096525,10.3965893 15.1797235,10.5406093 Z"})))},v=function(){var e=Object(r.useContext)(s);return a.a.createElement("div",{className:"chimee-controlbar__pause",onClick:function(){e.$emit("pause")}},a.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},a.a.createElement("g",{id:"pause"},a.a.createElement("path",{d:"M14.5,0 L14.5,0 C15.3284271,-1.52179594e-16 16,0.671572875 16,1.5 L16,16.5 C16,17.3284271 15.3284271,18 14.5,18 L14.5,18 C13.6715729,18 13,17.3284271 13,16.5 L13,1.5 C13,0.671572875 13.6715729,1.52179594e-16 14.5,0 Z"}),a.a.createElement("path",{d:"M3.5,0 L3.5,0 C4.32842712,-1.52179594e-16 5,0.671572875 5,1.5 L5,16.5 C5,17.3284271 4.32842712,18 3.5,18 L3.5,18 C2.67157288,18 2,17.3284271 2,16.5 L2,1.5 C2,0.671572875 2.67157288,1.52179594e-16 3.5,0 Z"}))))},d=function(){var e=Object(r.useContext)(s),t=Object(r.useState)(!1),n=t[0],o=t[1];return Object(r.useEffect)((function(){return e.$on("play",(function(){return o(!0)})),e.$on("pause",(function(){return o(!1)})),function(){}}),[]),a.a.createElement("div",{className:"chimee-controlbar__button chimee-controlbar__play--state"},n?a.a.createElement(v,null):a.a.createElement(f,null))},p=function(){var e=Object(r.useContext)(s),t=Object(r.useState)("00:00"),n=t[0],o=t[1],c=Object(r.useState)("00:00"),i=c[0],l=c[1],m=function(){o(u(e.duration)),l(u(e.currentTime))};return Object(r.useEffect)((function(){return e.$on("load",m),e.$on("timeupdate",m),function(){}}),[]),a.a.createElement("div",{className:"chimee-controlbar__play--time"},a.a.createElement("span",{className:"chimee-controlbar__play--time__passed"},i),a.a.createElement("span",{className:"chimee-controlbar__play--time__spliter"},"/"),a.a.createElement("span",{className:"chimee-controlbar__play--time__total"},n))},h=function(){var e=Object(r.useContext)(s);return"function"!=typeof e.$config.onNext?null:a.a.createElement("div",{className:"chimee-controlbar__button chimee-controlbar__play--next"},a.a.createElement("div",{className:"chimee-controlbar__play--next_button",onClick:function(){return e.$config.onNext()}},a.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},a.a.createElement("g",{id:"next"},a.a.createElement("path",{d:"M11.3533375,10.1853738 L1.5320776,16.3572169 C1.06446053,16.6510753 0.447162748,16.510216 0.153304405,16.042599 C0.0531388518,15.8832054 -8.30216278e-14,15.698775 -8.30446822e-14,15.5105214 L-8.23785484e-14,2.48947865 C-8.24461838e-14,1.9371939 0.44771525,1.48947865 1,1.48947865 C1.18825366,1.48947865 1.37268406,1.5426175 1.5320776,1.64278305 L11.3533375,7.81462617 C12.0080014,8.22602785 12.2052044,9.09024475 11.7938027,9.74490864 C11.6819217,9.92294502 11.5313739,10.0734928 11.3533375,10.1853738 Z"}),a.a.createElement("path",{d:"M16.5,0 L16.5,0 C17.3284271,-1.52179594e-16 18,0.671572875 18,1.5 L18,16.5 C18,17.3284271 17.3284271,18 16.5,18 L16.5,18 C15.6715729,18 15,17.3284271 15,16.5 L15,1.5 C15,0.671572875 15.6715729,1.52179594e-16 16.5,0 Z"})))))},b=[{value:.5,text:"0.5x"},{value:1,text:"1.0x"},{value:1.25,text:"1.25x"},{value:1.5,text:"1.5x"},{value:2,text:"2x"}],_=1,g=function(){var e=Object(r.useContext)(s),t=Object(r.useState)(null),n=t[0],o=t[1];Object(r.useEffect)((function(){setTimeout((function(){e.playbackRate=_}),10)}),[]);var c=Object(r.useCallback)((function(t){t!==n&&(e.playbackRate=t,o(_=t))}),[]);return a.a.createElement("div",{className:"chimee-controlbar__playback-rate"},a.a.createElement("div",{className:"chimee-controlbar__playback-rate__list__container"},a.a.createElement("ul",{className:"chimee-controlbar__playback-rate__list"},b.map((function(e){var t=e.value,r=e.text;return a.a.createElement("li",{key:t,onClick:function(){return c(t)},className:l()({active:t===n||null===n&&1===t})},r)})))),a.a.createElement("div",{className:"chimee-controlbar__playback-rate__text"},null===n?"倍数":b.find((function(e){return e.value===n})).text))},w=0,E=function(){var e=Object(r.useContext)(s);return a.a.createElement("div",{className:"chimee-controlbar__volume__button__normal",onClick:function(){return e.volume=0}},a.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("path",{stroke:"#FFF",strokeWidth:"2",strokeLinejoin:"round",d:"M1 13h4l6 4V1L5 5H1z"}),a.a.createElement("path",{d:"M14.904 13.995A6.979 6.979 0 0 0 17 9a6.977 6.977 0 0 0-2.002-4.901",stroke:"#FFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))))},x=function(){var e=Object(r.useContext)(s);return a.a.createElement("div",{className:"chimee-controlbar__volume__button__mute",onClick:function(){return e.volume=w}},a.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("path",{d:"M12 13.828V17a1 1 0 0 1-1.555.832L4.697 14H1a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h1.172l2 2H2v6h3a1 1 0 0 1 .555.168L10 15.13v-3.303l2 2zm0-5.656l-2-2V2.869l-1.982 1.32-1.442-1.441 3.87-2.58A1 1 0 0 1 12 1v7.172zm3.416 3.415C15.796 10.793 16 9.913 16 9a5.976 5.976 0 0 0-1.716-4.201 1 1 0 1 1 1.428-1.4A7.976 7.976 0 0 1 18 9a7.975 7.975 0 0 1-1.108 4.064l-1.476-1.477zM1.293 1.707A1 1 0 1 1 2.707.293l15 15a1 1 0 0 1-1.414 1.414l-15-15z",fill:"#FFF",fillRule:"nonzero"}))))};var C=function(){var e,t=Object(r.useRef)(null),n=function(e){var t=Object(r.useContext)(s),n=Object(r.useState)(0),a=n[0],o=n[1],c=Object(r.useState)(!1),i=c[0],l=c[1],u=Object(r.useState)(t.volume),m=u[0],f=u[1],v=Object(r.useCallback)((function(t){var n=e.current.getBoundingClientRect(),r=n.bottom,a=n.height,c=Math.max(0,Math.min(1,(r-t.clientY)/a));o(c)}),[e]),d=Object(r.useCallback)((function(n){var r=e.current.getBoundingClientRect(),a=r.bottom,c=r.height,i=(a-n.clientY)/c;t.volume=Math.max(0,Math.min(1,i)),o(0),l(!1),window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",d),window.removeEventListener("contextmenu",d)}),[e]),p=Object(r.useCallback)((function(){return f(t.volume)}),[]);return Object(r.useEffect)((function(){return t.$on("volumechange",p)}),[]),{active:i,volume:i?a:m,onMouseDown:function(e){v(e),l(!0),window.addEventListener("mousemove",v),window.addEventListener("mouseup",d),window.addEventListener("contextmenu",d)}}}(t),o=n.active,c=n.volume,i=n.onMouseDown,u=100*c+"%";return e=Object(r.useContext)(s),Object(r.useEffect)((function(){w?e.volume=w:w=e.volume,e.$on("volumechange",(function(){0!==e.volume&&(w=e.volume)}))}),[]),a.a.createElement("div",{className:l()("chimee-controlbar__volume",{active:o})},a.a.createElement("div",{className:"chimee-controlbar__volume__progress__container"},a.a.createElement("div",{className:"chimee-controlbar__volume__progress"},a.a.createElement("div",{className:"chimee-controlbar__volume__progress__track",onMouseDown:i,ref:t},a.a.createElement("div",{className:"chimee-controlbar__volume__progress__track__volume",style:{height:u}}),a.a.createElement("div",{className:"chimee-controlbar__volume__progress__point",style:{bottom:u}})))),a.a.createElement("div",{className:"chimee-controlbar__button chimee-controlbar__volume__button"},0===c?a.a.createElement(x,null):a.a.createElement(E,null)))};function y(){var e=Object(r.useContext)(s);return Object(r.useCallback)((function(){e.$fullscreen(!e.isFullscreen,"container")}),[])}var j=function(){var e=y();return a.a.createElement("div",{className:"chimee-controlbar__fullscreen__button",onClick:e},a.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{fillRule:"nonzero",stroke:"#FFF",strokeLinecap:"round",strokeWidth:"2"},a.a.createElement("path",{d:"M5 1H1v4M2 2l4 4"}),a.a.createElement("path",{d:"M13 17h4v-4M16 16l-4-4"}))))},k=function(){var e=y();return a.a.createElement("div",{className:"chimee-controlbar__unfullscreen__button",onClick:e},a.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{fillRule:"nonzero",stroke:"#FFF",strokeLinecap:"round",strokeWidth:"2"},a.a.createElement("path",{d:"M16 12h-4v4M13 13l4 4"}),a.a.createElement("path",{d:"M2 6h4V2M5 5L1 1"}))))},O=function(){var e=Object(r.useContext)(s),t=Object(r.useState)(e.isFullscreen),n=t[0],o=t[1];return Object(r.useEffect)((function(){e.$on("fullscreenchange",(function(){return o(e.isFullscreen)}))}),[]),a.a.createElement("div",{className:"chimee-controlbar__fullscreen chimee-controlbar__button"},n?a.a.createElement(k,null):a.a.createElement(j,null))},N=(n(3),function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(m,null),a.a.createElement("div",{className:"chimee-controlbar__groups"},a.a.createElement("div",{className:"chimee-controlbar__float--left"},a.a.createElement(d,null),a.a.createElement(h,null),a.a.createElement(p,null)),a.a.createElement("div",{className:"chimee-controlbar__float--right"},a.a.createElement(g,null),a.a.createElement(C,null),a.a.createElement(O,null))))});t.default={Context:s,Plugins:{FullScreen:O,Next:h,Play:d,PlaybackRate:g,Progress:m,Time:p,Volume:C},name:"controlbar",inner:!0,el:'<div class="chimee-controlbar"></div>',create:function(){var e=N;"function"==typeof this.$config.render&&(e=this.$config.render),c.a.render(a.a.createElement(s.Provider,{value:this},a.a.createElement(e,null)),this.$dom)},events:{keydown:function(e){switch(e.stopPropagation(),e.keyCode){case 32:e.preventDefault(),this.paused?this.play():this.pause();break;case 37:e.preventDefault();var t=this.currentTime-10;this.currentTime=t<0?0:t;break;case 39:e.preventDefault();var n=this.currentTime+10;this.currentTime=n>this.duration?this.duration:n;break;case 38:e.preventDefault();var r=this.volume+.1;this.volume=r>1?1:r;break;case 40:e.preventDefault();var a=this.volume-.1;this.volume=a<0?0:a}},click:function(){var e=this,t=new Date,n=this.clickTime;this.clickTime=t,t-n<300?clearTimeout(this.clickTimeId):this.clickTimeId=setTimeout((function(){e.paused?e.play():e.pause()}),300)},dblclick:function(){this.$fullscreen(!this.isFullscreen,"container")}}}}]).default}));